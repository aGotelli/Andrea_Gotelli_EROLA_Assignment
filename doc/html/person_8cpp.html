<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EROLA first assignment: /home/andrea/git/EROLA_first_assignment_AG/robot_simulation/src/person.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="goat.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EROLA first assignment
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1e21af3b5ad69883ab8f37d4fef13603.html">robot_simulation</a></li><li class="navelem"><a class="el" href="dir_fee6e9f550e2f8fef4afeaab4cb6820e.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">person.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This files emulates the a person giving commands to a robot.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;std_msgs/String.h&quot;</code><br />
<code>#include &lt;geometry_msgs/Pose.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;random&gt;</code><br />
<code>#include &quot;robot_simulation_messages/PersonCalling.h&quot;</code><br />
<code>#include &quot;robot_simulation_messages/GiveGesture.h&quot;</code><br />
<code>#include &lt;smach_msgs/SmachContainerStatus.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a308f112c3aaf55164f8c16cc7059e3a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="person_8cpp.html#a308f112c3aaf55164f8c16cc7059e3a2">PointingGesture</a> (robot_simulation_messages::GiveGesture::Request &amp;, robot_simulation_messages::GiveGesture::Response &amp;gesture)</td></tr>
<tr class="memdesc:a308f112c3aaf55164f8c16cc7059e3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">PointingGesture it is the service callback.  <a href="person_8cpp.html#a308f112c3aaf55164f8c16cc7059e3a2">More...</a><br /></td></tr>
<tr class="separator:a308f112c3aaf55164f8c16cc7059e3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dfe279fa2815e0af6da7d899e94e979"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="person_8cpp.html#a8dfe279fa2815e0af6da7d899e94e979">SaveStatus</a> (smach_msgs::SmachContainerStatus::ConstPtr state_machine_status_)</td></tr>
<tr class="memdesc:a8dfe279fa2815e0af6da7d899e94e979"><td class="mdescLeft">&#160;</td><td class="mdescRight">SaveStatus is the callback for the subscriber of the topic /robot_behavior_state_machine/smach/container_status.  <a href="person_8cpp.html#a8dfe279fa2815e0af6da7d899e94e979">More...</a><br /></td></tr>
<tr class="separator:a8dfe279fa2815e0af6da7d899e94e979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="person_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">main menage to collect parameters and pubishes a command constantly  <a href="person_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This files emulates the a person giving commands to a robot. </p>
<dl class="section author"><dt>Author</dt><dd>Andrea Gotelli </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>20/10/2020</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">world_width</td><td>Define the width of the discretized world. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">world_height</td><td>Define the height of the discretized world. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">minum_time_btw_calls</td><td>Define the minimum time between two calls to play </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maximum_time_btw_calls</td><td>Define the maximum time between two calls to play</td></tr>
  </table>
  </dd>
</dl>
<p>Subscribes to: <br  />
 ° /robot_behavior_state_machine/smach/container_status</p>
<p>Publishes to: <br  />
 ° /PlayWithRobot</p>
<p>Service : <br  />
 ° /GiveGesture</p>
<p>Description :</p>
<p>This node simulates a person behavior. The person is assumed to move randomly in the environment. The person calls the robot to play in an interval indicated with the use of the parameters: minum_time_btw_calls and maximum_time_btw_calls. It publishes the command the person wants to give in the topic: /PlayWithRobot. Before publishing the command, it check that the robot is neither in the Rest nor in the Play behavior already. This is done by comparing the state that has been published by the state machine published in the topic /robot_behavior_state_machine/smach/container_status. Moreover, it simulates a person taking time to point a position to the robot. This is done in the service callback, which waits for some time before giving the random position. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main menage to collect parameters and pubishes a command constantly </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramname">argv</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>The main function first collect all the parameters from the ros server. Then it initialises the publisher that emulates a person who call the robot to play. </p>

</div>
</div>
<a id="a308f112c3aaf55164f8c16cc7059e3a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a308f112c3aaf55164f8c16cc7059e3a2">&#9670;&nbsp;</a></span>PointingGesture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PointingGesture </td>
          <td>(</td>
          <td class="paramtype">robot_simulation_messages::GiveGesture::Request &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">robot_simulation_messages::GiveGesture::Response &amp;&#160;</td>
          <td class="paramname"><em>gesture</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PointingGesture it is the service callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gesture</td><td>it is the pointed position. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always true as this method cannot fail.</dd></dl>
<p>This function creates a geometry_msgs/Pose message. It fills up the response message with random value for x and y (ranging between 0 and the width, or height, respectively) </p>

</div>
</div>
<a id="a8dfe279fa2815e0af6da7d899e94e979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dfe279fa2815e0af6da7d899e94e979">&#9670;&nbsp;</a></span>SaveStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaveStatus </td>
          <td>(</td>
          <td class="paramtype">smach_msgs::SmachContainerStatus::ConstPtr&#160;</td>
          <td class="paramname"><em>state_machine_status_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SaveStatus is the callback for the subscriber of the topic /robot_behavior_state_machine/smach/container_status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state_machine_status_</td><td>is the message containing the stateus of the state machine</td></tr>
  </table>
  </dd>
</dl>
<p>This functions does nothing but saving the state that was received in the message. The state is expressed by a string that can be: MOVE, PLAY or REST; </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
